package top.anets.payTest;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import top.anets.domain.Pay;
import top.anets.utils.HttpUtils;

/**
 * @author Administrator
 * 微信jspai支付测试
 */
@Controller
@RequestMapping("/test")
public class WxJsapiPayTest {
	@RequestMapping("/pay")
	@ResponseBody
	public String pay(String code) {
		//拥有了传递来的code
		Pay pay = new Pay();
		pay.setCode(code);
		
        //获取openid
		String urlstr="https://api.weixin.qq.com/sns/oauth2/access_token?appid="+pay.getAppid()+"&secret="+pay.getSecret()+"&code="+code+"&grant_type=authorization_code";
		String string = HttpUtils.get(urlstr);
		
		return null;
	}
}
